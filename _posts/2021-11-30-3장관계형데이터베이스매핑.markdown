---
layout: post
title:  "3장 관계형데이터베이스"
date:   2021-11-14 09:01:09 +0900
categories: jekyll update
---

데이터 원본 계층의 역할은 인프라의 다양한 부분과 통신 하는 것 (데이터베이스와 상호작용)

## 아키텍처 패턴

    : 도메인 논리가 데이터베이스와 상호작용하는 방법을 좌우하는 패턴.

- SQL의 문제점은 sql을 제대로 이해하지 못해 효과적인 쿼리와 명령을 정의하는데 어려움이 있음 -> 애플리케이션 개발 언어에 맞는 메커니즘을 사용해 데이터에 접근하는 것이 바람직함

- 방법 : 데이터베이스 테이블의 테이블 구조를 바탕으로 클래스(=테이블에 대한 게이트웨이) 를 구성하면 애플리케이션의 나머지 부분에는 sql에 대해 알 필요가 없기 때문에, 개발자는 데이터베이스 특화 클래스에 집중하면 됨

- 게이트웨이를 사용하는 방법
    - 행데이터 게이트웨이 : 행별 인스턴스 생성
    - 테이블데이터 게이트웨이 : 데이터베이스의 각 테이블마다 클래스가 하나
        - 레코드 집합과 아주 잘어울림
        - 저장 프로시저를 정리하는데도 이 패턴을 고려할 수 있음
        - 구현 : 저장프로시저 호출을 래핑하는 인메모리 테이블 데이터 게이트웨이를 사용해 저장 프로시저 호출 로직을 캡슐화
- 도메인 모델을 사용 시, 행데이터 게이트웨이와 테이블데이터 게이트웨이를 함께 사용할 수 있음
- 도메인 모델이 복잡해질수록 간접성을 원함
    - 도메인 모델이 데이터베이스 스키마와 밀접하게 결합됨
    - 게이트웨이의 일부 필드가 도메인 객체의 필드로 변환되는 현상이 발생

    -